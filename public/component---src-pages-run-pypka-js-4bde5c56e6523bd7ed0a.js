(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"do/5":function(e,t,a){"use strict";a.r(t);var n=a("kD0k"),l=a.n(n),s=(a("ls82"),a("uRdJ")),i=a("9Hrx"),o=a("/S4K"),r=a("Wbzz"),c=a("q1tI"),u=a.n(c),m=a("Bl7J"),p=a("robv"),d=a("vrFN"),h=a("eMp/"),g=a.n(h),f=a("vDqi"),v=a.n(f),b=a("GGqY"),E=(a("jDDT"),a("M5Ap")),N=a.n(E);function S(e,t,a,n){return 1.2*e+(t-a)/n*.5}var y={headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Token:Math.random()}};function x(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://files.rcsb.org/view/"+t+".pdb");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("http://127.0.0.1:5000/getSubID",{},y);case 2:return a=e.sent,e.abrupt("return",a.data.subID);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://127.0.0.1:5000/getTitrableSitesNumber",{PDB:t},y);case 3:return a=e.sent,console.log(a),e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function B(e,t){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(l.a.mark((function e(t,a){var n,s,i,o,r,c,u,m,p,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://www.rcsb.org/pdb/rest/describeMol?structureId="+a);case 2:if(n=e.sent,s=new DOMParser,i=s.parseFromString(n.data,"text/xml"),console.log(i),o=i.getElementsByTagName("structureId")[0].getAttribute("error"),r=a,c=null,u=0,m=0,p="",console.log(o),!o){e.next=17;break}r=null,e.next=27;break;case 17:return p=i.getElementsByTagName("macroMolecule")[0].getAttribute("name")+" ("+a+")",e.next=20,x(a);case 20:return c=e.sent,e.next=23,F(c);case 23:"nchains"in(d=e.sent)&&(u=d.nchains,m=d.nsites),console.log(d,"nchains"in d),console.log(p,u,m);case 27:t.setState({pdbcode:r,pdbcode_error:o,pdbfile:c,nchains:u,nsites:m,protein_name:p});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setTimeEstimate(),e.next=3,H();case 3:a=e.sent,n={subID:a,pdb:t.state.pdbfile,inputNamingScheme:t.state.inputFileNamingScheme,outputpKs:t.state.outputpKValues,outputfile:t.state.outputPDBFile,outputNamingScheme:t.state.outputFileNamingScheme,outputFilepH:t.state.outputFilepH,pHmin:t.state.pHmin,pHmax:t.state.pHmax,pHstep:t.state.pHstep,epsin:t.state.proteinDielectric,epsout:t.state.solventDielectric,ionic:t.state.ionicStrength,nchains:t.state.nchains,nsites:t.state.nsites,protein_name:t.state.protein_name,time_estimate:t.state.time_estimate,email:t.state.email},Object(r.navigate)("/results/",{state:{send_json:n}});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){return u.a.createElement("div",{className:g.a.inputGroup},u.a.createElement("span",{className:"input-group-addon",style:{width:"50%"}},e.name),u.a.createElement(k,{extraStyle:e.extraStyle,defaultValue:e.defaultValue,condition1:e.condition1,condition2:e.condition2,disableOn:e.disableOn,saveState:e.saveState,width:"50%"}))},k=function(e){return u.a.createElement("input",{className:e.condition1&&e.condition2?g.a.borderPrimary+" "+e.extraStyle:e.extraStyle,style:{width:e.width,textAlign:"center",padding:"5px 12px"},type:"number",defaultValue:e.defaultValue,"aria-describedby":"basic-addon1",disabled:!e.disableOn,onChange:function(t){var a=t.target.value,n=parseFloat(a);a!==n&&(isNaN(n)?(console.log(n),t.target.value=""):(console.log(n),t.target.value=n)),e.saveState(n)}})},R=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).state={inputModeRadio:"pdb_code",pdbcode:null,pdbcode_error:null,inputFile:null,inputFileNamingScheme:"GROMOS",outputPDBFile:null,outputFileNamingScheme:null,outputFilepH:7,outputpKValues:!0,pHmin:0,pHmax:12,pHstep:.25,solventDielectric:80,proteinDielectric:12,ionicStrength:.1,numberOfTitratableSites:0,pdbfile:"",nsites:0,nchains:0,time_estimate:0,email:""},t.setTimeEstimate=function(){var e=S(t.state.nsites,t.state.pHmax,t.state.pHmin,t.state.pHstep);t.setState({time_estimate:e})},t.setoutputFilepH=function(e){t.setState({outputFilepH:e})},t.setpHmin=function(e){t.setState({pHmin:e}),console.log(t.state.pHmin)},t.setpHmax=function(e){t.setState({pHmax:e})},t.setpHstep=function(e){t.setState({pHstep:e})},t.setproteinDieletric=function(e){t.setState({proteinDielectric:e})},t.setsolventDielectric=function(e){t.setState({solventDielectric:e})},t.setionicStrength=function(e){t.setState({ionicStrength:e})},t.setemail=function(e){t.setState({email:e})},t.retrieveNumberOfSites=function(e){var a=e.target.files[0];console.log(a);t.setState({inputFile:a,numberOfTitratableSites:1})},t.retrieveFromPDB=function(e,t){t?B(e,t):e.setState({pdbcode_error:null})},t.submitForm=function(){console.log(t.state);var e=!0;t.state.pdbfile||(e=!1,console.log("pdbfile not found")),"upload"===t.state.inputModeRadio&&(t.state.inputFileNamingScheme||(e=!1,console.log("inputFileNamingScheme not found"))),t.state.outputpKValues||t.state.outputPDBFile||(e=!1,console.log("no output mode found")),t.state.outputPDBFile&&(t.state.outputFilepH&&t.state.outputFileNamingScheme||(e=!1,console.log("outputfile pH value or naming schema not found"))),t.state.outputpKValues&&(isNaN(t.state.pHmin)||isNaN(t.state.pHmax)||isNaN(t.state.pHstep))&&(e=!1,console.log("pH values not defined",isNaN(t.state.pHmin),isNaN(t.state.pHmax),isNaN(t.state.pHstep))),t.state.proteinDielectric&&t.state.solventDielectric&&t.state.ionicStrength||(e=!1,console.log("either dielectrics or ionic strength is not defined")),e?M(Object(s.a)(t)):b.a.warning("Please address the missing parameters highlighted in yellow",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this;return u.a.createElement(m.a,null,u.a.createElement(d.a,{title:"PypKa Calculations Server"}),u.a.createElement(p.a,{image:N.a,title:"PypKa Server",subtitle:"Leverage the webserver to quickly start calculating p<em>K</em><sub>a</sub> values in your protein of interest"}),u.a.createElement("section",{className:"section bg-gray",id:"section-form"},u.a.createElement("div",{className:"container"},u.a.createElement("header",{className:"section-header"},u.a.createElement("small",null,"input"),u.a.createElement("h2",null,this.props.isDarKMode," Parameters")),u.a.createElement("div",{className:"row gap-y"},u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"form-group"},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Input Mode"),u.a.createElement("div",{className:"custom-controls-stacked"},u.a.createElement("label",{className:"custom-control custom-radio",style:{textAlign:"center",margin:"auto"}},u.a.createElement("input",{type:"radio",id:"input-mode-pdbcode",className:"custom-control-input",name:"radio_input_mode",val:"pdb_code",checked:"pdb_code"===this.state.inputModeRadio,onChange:function(t){document.getElementsByName("pdb_code")[0].value="",e.setState({pdbfile:null,inputModeRadio:t.target.getAttribute("val"),inputFileNamingScheme:"GROMOS"})}}),u.a.createElement("span",{className:"custom-control-indicator"}),u.a.createElement("span",{className:"custom-control-description"},"PDB Code")),u.a.createElement("label",{className:"custom-control custom-radio",style:{textAlign:"center",margin:"auto"}},u.a.createElement("input",{type:"radio",id:"input-mode-upload",className:"custom-control-input",name:"radio_input_mode",val:"upload",checked:"upload"===this.state.inputModeRadio,onChange:function(t){document.getElementsByName("file_uploaded")[0].value="",e.setState({pdbfile:null,inputModeRadio:t.target.getAttribute("val")})}}),u.a.createElement("span",{className:"custom-control-indicator"}),u.a.createElement("span",{className:"custom-control-description"},"Upload File"))))),u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"form-group",style:{textAlign:"center"}},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"PDB Code"),u.a.createElement("input",{className:"pdb_code"===this.state.inputModeRadio&&[null,""].includes(this.state.pdbcode)?g.a.borderPrimary+" "+g.a.formControl:g.a.formControl,type:"text",placeholder:"Ex: 4LZT",name:"pdb_code",onChange:function(t){var a=t.target.value;e.retrieveFromPDB(e,a)},disabled:"pdb_code"!==this.state.inputModeRadio}),u.a.createElement("div",{className:"pdb_code"!==this.state.inputModeRadio||[null,""].includes(this.state.pdbcode_error)?"":"alert alert-warning"},this.state.pdbcode_error)),u.a.createElement("div",{className:"form-group",style:{textAlign:"center"}},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Input File"),u.a.createElement("input",{className:"upload"===this.state.inputModeRadio&&[null,""].includes(this.state.pdbfile)?g.a.borderPrimary+" "+g.a.formControl:g.a.formControl,type:"file",name:"file_uploaded",disabled:"upload"!==this.state.inputModeRadio,onChange:function(t){var a=e,n=new FileReader;n.onload=function(){function e(){return(e=Object(o.a)(l.a.mark((function e(t){var n,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,F(t);case 3:n=e.sent,console.log(n),console.log("nchains"in n),"nchains"in n?(s=n.nchains,i=n.nsites):(s=0,i=0,t=""),a.setState({pdbfile:t,nchains:s,nsites:i});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(n.result)};var s=t.target.files[0],i=s.name.split(".")[0];e.setState({protein_name:i}),n.readAsBinaryString(s)}}),u.a.createElement("div",{style:{marginBottom:"5px"}}),u.a.createElement("select",{className:"upload"===this.state.inputModeRadio&&[null,""].includes(this.state.inputFileNamingScheme)?g.a.borderPrimary+" "+g.a.formControl:g.a.formControl,id:"file_uploaded_force_field",disabled:"upload"!==this.state.inputModeRadio,defaultValue:"",onBlur:function(t){console.log(t.target.value),e.setState({inputFileNamingScheme:t.target.value})}},u.a.createElement("option",{value:"",disabled:!0},"Select the naming scheme"),u.a.createElement("option",{value:"AMBER"},"AMBER"),u.a.createElement("option",{value:"CHARMM"},"CHARMM"),u.a.createElement("option",{value:"GROMOS"},"GROMOS"),u.a.createElement("option",{value:"GROMOS"},"PDB")))),u.a.createElement("div",{className:"col-12 col-lg-4",style:{borderLeft:"0.5px solid rgba(47, 47, 47, 0.8)"}},u.a.createElement("div",{className:"form-group"},u.a.createElement("label",null,"Help"),u.a.createElement("p",null,"The input PDB file can be retrieved from the Protein Data Bank or it can be uploaded by the user."),u.a.createElement("p",null,"To use a structure from the Protein Data Bank please provide a valid 4-character PBD ID."),u.a.createElement("p",null,"To use a uploaded structure please select a PDB file with one of the following naming schemes: AMBER, GROMOS, CHARMM or PDB.")))),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("div",{className:"row gap-y"},u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"form-group"},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Ouput"),u.a.createElement("div",{className:"custom-controls-stacked"},u.a.createElement("label",{className:"custom-control custom-checkbox",style:{margin:"auto"}},u.a.createElement("input",{className:"custom-control-input",type:"checkbox",checked:this.state.outputpKValues,onChange:function(t){console.log(e.state.outputpKValues+e.state.outputPDBFile),e.setState({outputpKValues:t.target.checked})}}),u.a.createElement("span",{className:"custom-control-indicator"}),u.a.createElement("span",{className:"custom-control-description",style:{width:"100px"}},"pK",u.a.createElement("sub",null,"a")," values")),u.a.createElement("label",{className:"custom-control custom-checkbox",style:{margin:"auto"}},u.a.createElement("input",{type:"checkbox",className:"custom-control-input",onChange:function(t){e.setState({outputPDBFile:t.target.checked})}}),u.a.createElement("span",{className:"custom-control-indicator"}),u.a.createElement("span",{className:"custom-control-description",style:{width:"100px"}},"MD-ready PDB"))),u.a.createElement("div",{className:this.state.outputpKValues+this.state.outputPDBFile===0?"alert alert-warning":g.a.hidden},"One of the two must be selected"))),u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"form-group",style:{textAlign:"center"}},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Output PDB"),u.a.createElement("select",{className:!0===this.state.outputPDBFile&&[null,""].includes(this.state.outputFileNamingScheme)?g.a.borderPrimary+" "+g.a.formControl:g.a.formControl,disabled:!this.state.outputPDBFile,defaultValue:"",onBlur:function(t){e.setState({outputFileNamingScheme:t.target.value})}},u.a.createElement("option",{value:"",disabled:!0},"Select the desired naming scheme"),u.a.createElement("option",{value:"amber"},"AMBER"),u.a.createElement("option",{value:"gromos_cph"},"GROMOS")),u.a.createElement("br",null),u.a.createElement("div",{className:g.a.formControl},u.a.createElement(_,{name:"pH value",extraStyle:"form-control",defaultValue:this.state.outputFilepH,condition1:!0===this.state.outputPDBFile,condition2:[null,"",NaN].includes(this.state.outputFilepH),disableOn:this.state.outputPDBFile,saveState:this.setoutputFilepH})))),u.a.createElement("div",{className:"col-12 col-lg-4",style:{borderLeft:"0.5px solid rgba(47, 47, 47, 0.8)"}},u.a.createElement("div",{className:"form-group"},u.a.createElement("p",null,"The available outputs are the p",u.a.createElement("em",null,"K"),u.a.createElement("sub",null,"a")," values of the titratable amino acids and a PDB formatted file with the most likely protonation state at a given pH value."),u.a.createElement("p",null,"Please select the desired output file naming scheme and the target pH value.")))),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("div",{className:"row gap-y"},u.a.createElement("div",{className:"col-8",style:{padding:"0px",marginBottom:"-15px"}},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Parameters")),u.a.createElement("div",{className:"col-4"}),u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("label",null,"pH Titration Range")),u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("div",{className:g.a.inputGroup},u.a.createElement(_,{name:"pH min",extraStyle:"form-control",defaultValue:this.state.pHmin,condition1:!0,condition2:[null,"",NaN].includes(this.state.pHmin),disableOn:this.state.outputpKValues,saveState:this.setpHmin})),u.a.createElement("div",{className:g.a.inputGroup},u.a.createElement(_,{name:"pH max",extraStyle:"form-control",defaultValue:this.state.pHmax,condition1:!0,condition2:[null,"",NaN].includes(this.state.pHmax),disableOn:this.state.outputpKValues,saveState:this.setpHmax})),u.a.createElement("div",{className:g.a.inputGroup},u.a.createElement(_,{name:"pH step",extraStyle:"form-control",defaultValue:this.state.pHstep,condition1:!0,condition2:[null,"",NaN].includes(this.state.pHstep),disableOn:this.state.outputpKValues,saveState:this.setpHstep})))))),u.a.createElement("div",{className:"col-12 col-lg-4"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("label",null,"Dielectric Constants")),u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("div",{className:g.a.inputGroup},u.a.createElement(_,{name:"Protein",extraStyle:"form-control",defaultValue:this.state.proteinDielectric,condition1:!0,condition2:[null,"",NaN].includes(this.state.proteinDielectric),disableOn:!0,saveState:this.setproteinDieletric})),u.a.createElement("div",{className:g.a.inputGroup,style:{marginTop:"5px"}},u.a.createElement(_,{name:"Solvent",extraStyle:"form-control",defaultValue:this.state.solventDielectric,condition1:!0,condition2:[null,"",NaN].includes(this.state.solventDielectric),disableOn:!0,saveState:this.setsolventDieletric})))),u.a.createElement("div",{className:"row",style:{marginTop:"15px"}},u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("label",null,"Ionic Strength")),u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement(k,{width:"100%",extraStyle:"form-control",defaultValue:this.state.ionicStrength,condition1:!0,condition2:[null,"",NaN].includes(this.state.ionicStrength),disableOn:!0,saveState:this.setionicStrength})))),u.a.createElement("div",{className:"col-6 col-lg-4",style:{borderLeft:"0.5px solid rgba(47, 47, 47, 0.8)"}},u.a.createElement("div",{className:"form-group"},u.a.createElement("p",null,"Please set pH min and pH max so that the pKa of all titratable amino acids is withing the titration range. pH step determines the difference between consecutive pH values in the simulated titration."),u.a.createElement("p",null,"The default value for the protein dielectric has been found to minimize the error of the prediction. The default value for the solvent dielectric is the experimental value of water at around 273K.")))),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("div",{className:"row gap-y"},u.a.createElement("div",{className:"col-8",style:{padding:"0px",marginBottom:"-15px"}},u.a.createElement("h3",{className:"divider",style:{fontSize:"1rem",width:"80%",color:"#777"}},"Email Notification (optional)")),u.a.createElement("div",{className:"col-4"}),u.a.createElement("div",{className:"col-12 col-lg-8"},u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-12 col-lg-6",style:{textAlign:"right"}},u.a.createElement("label",null,"Email")),u.a.createElement("div",{className:"col-12 col-lg-6"},u.a.createElement("input",{type:"text",value:this.state.email,onChange:function(t){var a=t.target.value;e.setemail(a)}}))))),u.a.createElement("div",{className:"col-6 col-lg-4",style:{borderLeft:"0.5px solid rgba(47, 47, 47, 0.8)"}},u.a.createElement("div",{className:"form-group"},u.a.createElement("p",null,"Insert email to receive notification of the end of the run.")))))),u.a.createElement("section",{className:"section section-inverse py-40",style:{backgroundColor:"#8ea6e6"}},u.a.createElement("div",{className:"container"},u.a.createElement("div",{className:"row gap-y align-items-center text-center text-md-left",style:{alignItems:"flex-end!important"}},u.a.createElement("div",{className:"col-12 col-md-9"},u.a.createElement("h4",{className:"fw-300 mb-0"},this.state.nsites," Titratable Sites over ",this.state.nchains," Chains"),u.a.createElement("h4",{className:"fw-300 mb-0"},"Estimated Running Time: ",S(this.state.nsites,this.state.pHmax,this.state.pHmin,this.state.pHstep),"s"),u.a.createElement("h4",{className:g.a.hidden+" fw-300 mb-0"},"Queued Submissions: 0 (Average Time per Submission: 60s)")),u.a.createElement("div",{className:"col-12 col-md-3 text-center text-md-right"},u.a.createElement("a",{className:"btn btn-lg btn-round btn-white",onClick:this.submitForm,style:{color:"#b5b9bf"}}," Submit"))))))},t}(u.a.Component);t.default=R},jDDT:function(e,t,a){}}]);
//# sourceMappingURL=component---src-pages-run-pypka-js-4bde5c56e6523bd7ed0a.js.map